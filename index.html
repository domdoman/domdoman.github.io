<!DOCTYPE html>
<html>
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E5JELYNQ61"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-E5JELYNQ61');
    </script>
    <title>Irish Plantations - Location &amp; Event Information</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="css/leaflet.legend.css" />
    <style>
        #map {
            position: relative;
            width: 100%;
            height: 100vh;
        }

        #map-logo {
            position: absolute;
            bottom: 20px;
            left: 20px;
            width: 500px;
            height: auto;
            z-index: 1000; /* Place the image above the map */
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <!-- <img src="img/X.png" id="map-logo"> -->

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script type="text/javascript" src="js/leaflet.legend.js"></script>

    <script>

        var map = L.map('map').setView([53.424, -7.927], 8);

        L.control.Legend({
            position: "topleft",
            legends: [
                {
                    label: "LOCATION",
                    type: "image",
                    url: "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",
                },
                {
                    label: "EVENT",
                    type: "image",
                    url: "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",
                }
            ]
        }).addTo(map);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        var locationIcon = new L.Icon({
            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
        });

        var eventIcon = new L.Icon({
            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
        });

        // var locations = [
        //     { coords: [53.35758, -6.23424], popup: "ESB East Wall", type: 'location'},
        //     { coords: [53.2521699095364, -6.124163144044842], popup: "Ridge Hall", type: 'location'},
        //     { coords: [53.299678130352156, -6.175327335956016], popup: "Frascati House", type: 'location'},
        //     { coords: [53.187510381883406, -7.983908114961095], popup: "La Sainte Union Convent Banagher", type: 'location'},
        //     { coords: [53.31879278092031, -6.381074168603184], popup: "SIAC Construction", type: 'location'},
        // ];

        // var events = [
        //     { coords: [53.34022, -6.26077], popup: "Algerian national charged over horror Grafton Street stabbing - [<a href='https://gript.ie/algerian-national-charged-over-horror-grafton-street-stabbing/' target='_blank'>More Info</a>]", type: 'event'},
        //     { coords: [53.32336209116907, -6.238313188814177], popup: "Man in court accused of ‘random’ face-slashing attack on woman in Dublin - [<a href='https://www.irishtimes.com/crime-law/2023/09/01/man-remanded-accused-of-random-face-slashing-attack-on-woman-in-dublin/' target='_blank'>More Info</a>]", type: 'event'},
        //     { coords: [54.28027757457044, -8.47654995934747], popup: "Man (23) pleads guilty to murdering Aidan Moffitt and Michael Snee in Sligo last year - [<a href='https://www.thejournal.ie/yousef-palani-pleads-guilty-sligo-murders-6133085-Jul2023/' target='_blank'>More Info</a>]", type: 'event'},
        // ];

        fetch('data/locations.json')
            .then(response => response.json())
            .then(markers => {
                markers.forEach(function(marker) {
                    var latlng = L.latLng(marker.coords[0], marker.coords[1]);
                    var popup = L.popup().setContent(`<b>LOCATION</b><br>${marker.popup}`);
                    
                    L.marker(latlng, { title: "Location", icon: locationIcon }).addTo(map).bindPopup(popup);
                });
            })
            .catch(error => {
                console.error('Error fetching markers data:', error);
            });

        fetch('data/events.json')
            .then(response => response.json())
            .then(markers => {
                markers.forEach(function(marker) {
                    var latlng = L.latLng(marker.coords[0], marker.coords[1]);
                    var popup = L.popup().setContent(`⚠️ <b>EVENT</b> ⚠️<br>${marker.popup}`);
                    
                    L.marker(latlng, { title: "Event", icon: eventIcon }).addTo(map).bindPopup(popup);
                });
            })
            .catch(error => {
                console.error('Error fetching markers data:', error);
            });



        // locations.forEach(function(marker) {
        //     var latlng = L.latLng(marker.coords[0], marker.coords[1]);
        //     var popup = L.popup().setContent(`<b>LOCATION</b><br>${marker.popup}`);
            
        //     var mapMarker = L.marker(latlng, { title: "Marker", icon: locationIcon }).addTo(map).bindPopup(popup);
        // });

        // events.forEach(function(marker) {
        //     var latlng = L.latLng(marker.coords[0], marker.coords[1]);
        //     var popup = L.popup().setContent(`⚠️ <b>EVENT</b> ⚠️<br>${marker.popup}`);
            
        //     var mapMarker = L.marker(latlng, { title: "Marker", icon: eventIcon }).addTo(map).bindPopup(popup);
        // });

    </script>
</body>
</html>
